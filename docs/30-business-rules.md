# 비즈니스 규칙 / 프로젝트 규칙

## 1. 사용자/권한

- 이 앱은 **단일 사용자**를 전제로 합니다.
- 인증/권한(Role) 개념을 도입하지 않습니다.

## 2. 데이터 출처/해석 정책

### 2.1 타로 의미(Meaning) 정책

- 타로 카드 의미는 **사전 정의된 카드 데이터**가 “진실의 근거”입니다.
- GPT는 의미를 새로 “창작”하지 않고, 기존 데이터를 **요약/문장화/구성**하는 용도로만 사용합니다.

### 2.2 Waite 텍스트/이미지 자동 채움 정책

- 자동 채움은 **공개 라이선스/퍼블릭 도메인** 소스만 사용합니다.
  - 텍스트: Project Gutenberg(plain text)
  - 이미지: Wikimedia Commons(RWS 파일명 규칙 기반 URL)
- 자동 채움 결과는 DB에 저장되어 **재열람 가능**해야 합니다.
- 스크립트는 반복 실행해도 결과가 일관되도록 **재실행 안전**해야 합니다.

## 3. OpenAI 사용 규칙

- OpenAI API 호출은 **백엔드에서만** 허용합니다.
- 프론트엔드는 OpenAI를 직접 호출하지 않습니다.
- 저장 규칙
  - **프롬프트 텍스트(promptText)** 저장
  - **프롬프트 버전(promptVersion)** 저장
  - 모델명(model), 생성 결과 텍스트(readingText/summaryOneLine 등) 저장
- 응답 품질 규칙
  - 가능한 한 **결정적이고 간결**한 스타일을 유도합니다.
  - 불필요한 장황함을 피하고, 기록으로 읽기 좋은 톤을 유지합니다.

## 4. 날짜/시간 규칙

- 모든 날짜는 문자열 `YYYY-MM-DD`(ISO) 형식으로 관리합니다.
- 생성 시각은 `DateTime`으로 기록합니다.

## 5. UI/카피 규칙

- 톤: calm, mystical, concise
- UI 문구에 이모지를 사용하지 않습니다.
- 모든 비동기 UI는 로딩/빈 상태/에러 상태를 제공합니다.

## 6. 안전성(Undo-safe)

- 사용자의 행동으로 데이터가 파괴적으로 삭제/덮어쓰기 되는 기능은 기본적으로 금지합니다.
- 불가피한 경우, 반드시 확인(Confirm) 단계를 거칩니다.

## 7. 코드/아키텍처 규칙(요약)

- TypeScript: `any` 금지, 명확한 타입 사용
- named export 선호
- RESTful endpoint 유지
- controller/service/repository 레이어 분리
- Prisma 스키마: 정규화/가독성 유지, createdAt 포함
- 시크릿/키 하드코딩 금지


